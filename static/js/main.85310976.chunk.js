(this["webpackJsonpproximity-tech-challenge"]=this["webpackJsonpproximity-tech-challenge"]||[]).push([[0],{214:function(e,t,c){},215:function(e,t,c){},326:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),i=c(186),r=c.n(i),o=(c(214),c(215),c(32)),s=c(55),j=c(22),l=c(347),d=c(352),b=c(353),u=c(354),O=c(355),h=c(356),x=c(357),m=c(358),f=c(17),p=c(349),y=c(359),g=c(360),v=c(351),w=c(8),D=Object(f.a)(l.a)((function(e){e.theme;return{color:"#000",borderColor:"#000"}})),S=new Date,k={},C={},I={},T=function(){var e=Object(n.useState)(!0),t=Object(j.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)({}),i=Object(j.a)(a,2),r=i[0],l=i[1],f=Object(n.useState)({}),T=Object(j.a)(f,2),A=T[0],E=T[1],W=Object(n.useState)([]),_=Object(j.a)(W,2),q=_[0],J=_[1],L=Object(n.useState)([]),M=Object(j.a)(L,2),P=(M[0],M[1],Object(n.useState)([])),z=Object(j.a)(P,2),F=(z[0],z[1],Object(n.useState)({})),N=Object(j.a)(F,2),Q=N[0],V=N[1],B=Object(n.useState)([new Date((new Date).setTime((new Date).getTime()-10)),new Date]),G=Object(j.a)(B,2),R=G[0],X=G[1],Z=Object(n.useRef)(null),H=function(e){(new Date).getTime()-S.getTime()>1e3&&(JSON.parse(e.data).forEach((function(e){var t=parseFloat(e.aqi.toFixed(2));k[e.city]&&k[e.city].length>0?k[e.city].push({updated_at:new Date,value:t}):k[e.city]=[{updated_at:new Date,value:t}],C[e.city]=Object(s.a)({aqi:t,updated_at:Date.now()},function(e){var t,c;return e>=0&&e<=50?(t="Good",c="#55a84f"):e>50&&e<=100?(t="Satisfactory",c="#a2c853"):e>100&&e<=200?(t="Moderate",c="#fff832"):e>200&&e<=300?(t="Poor",c="#f39c32"):e>300&&e<=400?(t="Very Poor",c="#e93f33"):(t="Severe",c="#ae2d24"),{category:t,color:c}}(t))})),l(Object(s.a)(Object(s.a)({},r),k)),E(Object(s.a)(Object(s.a)({},A),C)),S=new Date)};Object(n.useEffect)((function(){var e=new WebSocket("wss://city-ws.herokuapp.com");e.onopen=function(){c(!1)},e.onmessage=H})),Object(n.useEffect)((function(){Z&&Z.current&&Z.current.scrollIntoView()}),[q]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(d.a,{component:b.a,sx:{maxWidth:"960px",width:"95%",margin:"2rem auto"},children:Object(w.jsxs)(u.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(w.jsx)(O.a,{children:Object(w.jsxs)(h.a,{children:[Object(w.jsx)(x.a,{children:"City"}),Object(w.jsx)(x.a,{children:"AQI"}),Object(w.jsx)(x.a,{children:"Actions"})]})}),Object(w.jsx)(m.a,{children:Object.keys(A).map((function(e){return Object(w.jsxs)(h.a,{sx:{"&:last-child td, &:last-child th":{border:0},background:A[e].color,transition:"background 200ms ease-in-out"},children:[Object(w.jsx)(x.a,{component:"th",scope:"row",children:e}),Object(w.jsx)(x.a,{children:Object(w.jsx)("div",{style:{fontWeight:"bold"},children:A[e].aqi})}),Object(w.jsx)(x.a,{children:Object(w.jsx)(D,{variant:"outlined",onClick:function(){return function(e){var t=q;t.push(e),I[e]="#"+(Math.random().toString(16)+"00000").slice(2,8),J(Object(o.a)(t)),V(Object(s.a)(Object(s.a)({},Q),I))}(e)},children:"Live Tracking"})})]},e)}))})]})}),q&&q.length>0&&Object(w.jsxs)("div",{style:{width:"960px",margin:"1rem auto 3rem auto",display:"flex",alignItems:"center",justifyContent:"center"},ref:Z,children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(p.a,{domainPadding:{x:0,y:10},containerComponent:Object(w.jsx)(y.a,{zoomDimension:"x",zoomDomain:R,onZoomDomainChange:function(e){X(e.x)}}),children:Object(w.jsx)(g.a,{children:q.map((function(e){return Object(w.jsx)(v.a,{animate:{duration:500,onLoad:{duration:500}},style:{data:{stroke:Q[e]}},data:r[e],x:"updated_at",y:"value"})}))})}),Object(w.jsx)("br",{}),Object(w.jsx)("strong",{children:"Live AQI"})]}),Object(w.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:q.map((function(e,t){return Object(w.jsxs)("strong",{style:{color:Q[e],margin:"0.25rem"},children:[e,Object(w.jsx)("span",{style:{color:"red",cursor:"pointer"},onClick:function(){return function(e){var t=q;t.splice(e,1),J(Object(o.a)(t))}(t)},children:"\xa0\xa0X\xa0\xa0"})]})}))})]})]})};var A=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(T,{})})};r.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(A,{})}),document.getElementById("root"))}},[[326,1,2]]]);
//# sourceMappingURL=main.85310976.chunk.js.map